verbatim:
  cabal-version: 2.4

name: liquidator-redux
version: 0.1.0.0

license: 'AGPL-3.0-or-later'
author: Joachim Fasting
maintainer: joachifm@fastmail.fm

# The "dialect" of Haskell we're using
default-extensions:
  AutoDeriveTypeable
  BangPatterns
  ConstraintKinds
  DataKinds
  DefaultSignatures
  GADTs
  LambdaCase
  MonadFailDesugaring
  MultiWayIf
  OverloadedStrings
  ScopedTypeVariables
  StrictData
  TupleSections
  TypeFamilies
  ViewPatterns

ghc-options:
  -Wno-unused-top-binds
  -Wall
  -Wcompat
  -Widentities
  -Wincomplete-record-updates
  -Wincomplete-uni-patterns
  -Wpartial-fields
  -Wredundant-constraints
  -ddump-deriv
  -ddump-simpl
  -ddump-splices
  -ddump-to-file
  -fhide-source-paths

dependencies:
  # Haskell Platform
  - async
  - base
  - bytestring
  - containers
  - deepseq
  - mtl
  - text
  - time

  - aeson
  - aeson-casing
  - auto-update
  - cookie
  - http-api-data
  - lens-family
  - lens-family-th
  - lucid
  - servant
  - servant-lucid
  - servant-server
  - servant-swagger
  - swagger2
  - uuid
  - wai
  - warp

library:
  source-dirs: src
  exposed-modules:
    - Liquidator.Api
    - Liquidator.Types
    - Liquidator.WebFront.Server

executables:
  liquidator-web-front-server:
    main: web-front-server.hs
    source-dirs:
      - app
      - src

    ghc-options:
      -threaded -rtsopts
      -fexpose-all-unfoldings -fspecialise-aggressively

tests:
  spec:
    main: Spec.hs
    source-dirs:
      - test/spec
      - src

    cpp-options: -DTEST
    ghc-options: -O0 -threaded "-with-rtsopts=-N"

    dependencies:
      - QuickCheck
      - generic-arbitrary
      - hspec
      - quickcheck-instances

    build-tools:
      - hspec-discover

  hlint:
    main: hlint.hs
    source-dirs:
      - test/hlint

    ghc-options: -O0 -threaded "-with-rtsopts=-N"

    dependencies:
      - hlint
